## File support
This library implements two file stores: one is referred to as _permanent_, the other as the _ephemeral_ 
store. The permanent file store is for storing critical files that, such as user uploads, cannot be recovered. The 
ephemeral store is for non-critical files that can be regenerated by the system either dynamically or via an event replay.   

Our file store implementation automatically deduplicates files. Storing a file whose contents matches 
a previous file will return a (new) file identifier mapping to the original. The most recently stored file will then be
silently removed. 

File stores need backing service such as a blob store or filesystem. This starter kit supports 
[Mongo GridFS](https://docs.mongodb.com/manual/core/gridfs/) and AWS S3 at time of writing.

#### Spring boot beans
Exposes the spring bean `FileService` for consumers

#### Configuring Mongo GridFS
Set the application property
```
application.filestore.backend=mongoGridFs
```
It'll use the configured mongodb credentials.

#### Configuring AWS S3
Set the following application properties.
```
application.filestore.backend=awsS3
application.filestore.awsS3.buckets.permanent=sample-bucket-permanent
application.filestore.awsS3.buckets.ephemeral=sample-bucket-ephemeral
```
We rely on [DefaultAWSCredentialsProviderChain](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html) 
and [DefaultAwsRegionProviderChain](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/regions/DefaultAwsRegionProviderChain.html) for fetching aws credentials
and aws region. Please read their documentation and pick a way to configure those details.

*TODO: Add more details*